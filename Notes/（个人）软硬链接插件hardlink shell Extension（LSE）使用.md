### hardlink shell Extension（LSE）使用方法

#### 目的

1.节约C盘的空间

2.实时备份软件的存放在C盘的“主要数据”（一个软件在C盘的数据是分散的）

(因为有部分数据文件比较深入，且应该没有记录设置等重要数据，大小也比较小，重要的是软件在重装系统后也需要重新安装，保存的是数据)

主要数据本体会位于软件安装目录下的“软件数据”文件夹下，并在C盘的原本位置建立符号链接。

首先，此软件非绿色版，在C盘appdata有一定的数据文件。选择的是x64版本安装。软件也叫：NTFS文件连接扩展配置。

#### 相关概念

符号链接（即软链接，symbolic link）对符号链接的修改将对源文件造成相同的影响，可以认为是特殊的快捷方式（不占空间）。

硬链接（hardlink）同一个文件系统中，多个文件名指向同一个索引节点，相当于同一文件的另外一个“入口”。因此不能链接“目录”，也不能链接“文件夹”，只能是一个特定的“文件”。相当于一个不占空间的相同“副本”，而且对其的修改也是同步的。（1.无法跨分区。2.入口全部删除，文件的inode“索引节点”才彻底废用）

目录联接/连接/链接（junction）只可以链接到“目录”。这个目录有自己的路径，时刻保持与源目录内容同步。对双方的文件操作会使双方达到同步效果，源目录被删除后目录联接无效。（类似于符号链接目录版）

绝对路径：文件在硬盘分区上的“真正”存在的路径，如C:\xxx\xxx

相对路径：相对“现在文件”或者说“现在目录”的“目标文件”的位置。因为上传到服务器或者其他设备是可能和本身的绝对路径不一样，甚至连盘符都没有，则以一个文件的所在目录的相对位置更可能找到目标文件。

假设html文件为aa.html，则在服务器表示一个jpg文件xxx.jpg的不同语法为：

若xxx.jpg与aa.html同一目录（同一级），使用`<body background ="xxx.jpg">`

若在与aa.html同一目录的“233文件夹”内，则为`<body background ="233/xxx.jpg">`

注意：相对路径使用`/`作为分隔字符，而`\`为绝对路径的分隔字符。

"../"为“上一级”目录的符号，若在aa.html目录的上一级的目标文件，则为`<body background ="../xxx.jpg>`

aa.html目录上一级中的666文件夹的根目录的目标文件，则为`<body background ="../666/xxx.jpg">`

补充：相对虚拟目录：`<body background ="/233/xxx.jpg">`此处多了一个“/”，代表了虚拟目录的根目录。如果把`E:\23333\810`设为虚拟目录的根目录，则上述的代表的真实路径即为：`E:\23333\810\233\xxx.jpg`

### LSE使用方法

hardlinkshell本身只是配置工具，运行本体也只是设置参数。真正的使用是配置后打开资源管理器，右键需要建立链接的源文件选择“选择源连接点”。

然后到想要创建链接的目录点击右键，在“创建为...”（Drop As...)里选择链接类型。

注意：对一个符号链接副本，不可以以此作源来创建符号链接或者目录联结，但依然可以创建副本。

LSE还可以变更目录联结、符号链接、挂载点的目标（target），即链接到的目录及以下的所有文件。
把新的目标选择为源连接点，然后右键需要更改目标的已经存在的链接，选项会多出“替换连接点/替换符号链接”
更改后，原符号链接名字不变，实际上已经是新的目标的符号链接了。

副本（clone）和复制（copy)不一样。选定一个符号链接文件为源连接点，选项会出现“symbolic link copy”会创建一个名字和指向都完全相同的符号链接，相当于多个符号链接对一个源文件，三体同步。

首先，常规文件的选项有以下：

1.硬链接（hardlink) 
2.符号链接(symbolic link) 
3.目录连接点(junction) 
4.智能副本(smart copy) 
5.智能镜像(smart mirror) 
6.多版本智能副本(DeLorean Copy) 
7.硬链接副本(hardlink clone) 
8.符号链接副本(symbolic link clone) 
9.替换连接点

符号链接、目录联结：改动双向，符号链接本身会显示有大小，但实际上只有源文件占空间。源文件不在原目录时，符号链接失效。

副本：完全独立，改动不可通。但是符号链接副本全部文件格式为.symlink且大小为0k，都可同等用作快捷方式。

副本和镜像等选项，都是基于上述特殊功能的文件备份功能。

表现为：
智能镜像：（1、2、3、4）为源连接点，在存在（1、2、3）目录下创建，只会“添加”4
智能副本：（1、2、3、4）为源连接点，在（1、2、3）目录下创建，会添加（1-1、2-1、3-1、4）

“镜像目录备份”可将一个目录的结构（含硬连接）复制到另一个位置目录。副本目录的文件之间将保持硬连接，从而避免普通备份软件将连接的文件复制为两个文件而占用冗余的磁盘空间。镜像备份与智能副本复制的区别在于，在镜像备份生效的过程中，如果副本目录中的文件在原始目录中不存在，则该文件将被删除。（也就是删除原始目录的文件会使副本目录的无效文件副本自动删除，而因为建立硬链接的性质，相当于同步备份）

“多版本目录备份”（DeLorean Copy）将选定文件夹的内容复制到目标目录。在复制之前会将被覆盖的目标目录先创建一个版本备份，再执行复制。新副本和旧副本中相同的文件将用硬连接关联起来，所以副本占用的空间是一份而不是前后几份文件的大小。使用这个智能的增量备份，你可以随时用副本目录的文件执行还原操作。